<script>
// Admin authentication check
if (localStorage.getItem('adminLoggedIn') !== 'true') {
    window.location.href = 'admin-login.html';
}

// Display current user info
document.addEventListener('DOMContentLoaded', function() {
    const adminName = localStorage.getItem('adminName');
    
    // Update page title with user info
    if (adminName) {
        document.title = `${adminName} - Payment Settings - Crown Trade Academy`;
    }
});
</script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Settings - Crown Trade Academy</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Premium Header -->
    <header class="premium-header">
        <nav class="premium-nav">
            <a href="index.html" class="logo">Crown Trade Academy</a>
            <div style="display: flex; align-items: center; gap: 2rem;">
                <span style="color: var(--warm-beige);">Payment Settings</span>
                <ul class="nav-links">
                    <li><a href="admin-dashboard.html">Admin Dashboard</a></li>
                    <li><a href="admin-payment-settings.html" style="color: var(--warm-beige);">Payment Settings</a></li>
                    <li><a href="#" onclick="logoutAdmin()">Logout</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Settings Hero -->
    <section class="premium-container" style="padding: 2rem 0;">
        <div class="premium-card" style="background: linear-gradient(135deg, var(--muted-rose), var(--warm-beige)); color: var(--dark-brown);">
            <div style="display: flex; justify-content: between; align-items: center; flex-wrap: wrap; gap: 2rem;">
                <div>
                    <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">üí∞ Payment Settings</h1>
                    <p style="font-size: 1.1rem; font-weight: 600;">Update bank details, pricing, and payment information</p>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 0.9rem; color: var(--dark-brown);">Last Updated</div>
                    <div style="font-size: 1rem; font-weight: 700;">January 20, 2024</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Payment Settings Form -->
    <section class="premium-container">
        <form id="paymentSettingsForm">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <!-- Left Column - Bank & Mobile Money -->
                <div>
                    <!-- Bank Details -->
                    <div class="premium-card">
                        <h2 style="margin-bottom: 1.5rem; color: var(--dark-brown);">üè¶ Bank Transfer Details</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Bank Name</label>
                            <input type="text" class="form-control" id="bankName" 
                                   value="Standard Chartered Bank Kenya" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Account Name</label>
                            <input type="text" class="form-control" id="accountName" 
                                   value="Crown Trade Academy" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Account Number</label>
                            <input type="text" class="form-control" id="accountNumber" 
                                   value="0100000000000" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Branch</label>
                            <input type="text" class="form-control" id="branch" 
                                   value="Westlands Branch" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">SWIFT Code</label>
                            <input type="text" class="form-control" id="swiftCode" 
                                   value="SCBLKENX" required>
                        </div>
                    </div>

                    <!-- Mobile Money -->
                    <div class="premium-card">
                        <h2 style="margin-bottom: 1.5rem; color: var(--dark-brown);">üì± Mobile Money (MPESA)</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Business Name</label>
                            <input type="text" class="form-control" id="mpesaName" 
                                   value="Crown Trade Academy" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="mpesaNumber" 
                                   value="+254700000000" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Till Number</label>
                            <input type="text" class="form-control" id="tillNumber" 
                                   value="000000" required>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Pricing & Instructions -->
                <div>
                    <!-- Program Pricing -->
                    <div class="premium-card">
                        <h2 style="margin-bottom: 1.5rem; color: var(--dark-brown);">üéØ Program Pricing (KES)</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Registration Fee</label>
                            <input type="number" class="form-control" id="registrationFee" 
                                   value="500" min="0" required>
                            <small style="color: var(--muted-rose);">One-time registration fee for referral program</small>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Mentorship Program</label>
                            <input type="number" class="form-control" id="mentorshipFee" 
                                   value="50000" min="0" required>
                            <small style="color: var(--muted-rose);">Elite 1-on-1 training program</small>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Advanced Program</label>
                            <input type="number" class="form-control" id="advancedFee" 
                                   value="75000" min="0" required>
                            <small style="color: var(--muted-rose);">Advanced trading program (optional)</small>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Premium Package</label>
                            <input type="number" class="form-control" id="premiumFee" 
                                   value="120000" min="0" required>
                            <small style="color: var(--muted-rose);">Complete premium package (optional)</small>
                        </div>
                    </div>

                    <!-- Referral System -->
                    <div class="premium-card">
                        <h2 style="margin-bottom: 1.5rem; color: var(--dark-brown);">üë• Referral System</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Referral Bonus (KES)</label>
                            <input type="number" class="form-control" id="referralBonus" 
                                   value="300" min="0" required>
                            <small style="color: var(--muted-rose);">Amount earned per successful referral</small>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Minimum Withdrawal (KES)</label>
                            <input type="number" class="form-control" id="minWithdrawal" 
                                   value="100" min="0" required>
                            <small style="color: var(--muted-rose);">Minimum amount for withdrawal requests</small>
                        </div>
                    </div>

                    <!-- Payment Instructions -->
                    <div class="premium-card">
                        <h2 style="margin-bottom: 1.5rem; color: var(--dark-brown);">üìù Payment Instructions</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Contact Email</label>
                            <input type="email" class="form-control" id="contactEmail" 
                                   value="crowntradeacademy@gmail.com" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Verification Message</label>
                            <textarea class="form-control" id="verificationMessage" 
                                      rows="4" required>Kindly before payment contact us through our email crowntradeacademy@gmail.com for verification and payment instructions. All transactions require verification for security purposes.</textarea>
                            <small style="color: var(--muted-rose);">This message appears on all payment pages</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="premium-card" style="margin-top: 2rem;">
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <button type="submit" class="btn-premium" style="padding: 1rem 2rem;">
                        üíæ Save All Changes
                    </button>
                    <button type="button" class="btn-secondary" onclick="resetToDefault()" style="padding: 1rem 2rem;">
                        üîÑ Reset to Default
                    </button>
                    <button type="button" class="btn-premium" onclick="testPaymentSystem()" style="padding: 1rem 2rem;">
                        üß™ Test Payment System
                    </button>
                </div>
            </div>
        </form>
    </section>

    <!-- Change History -->
    <section class="premium-container">
        <div class="premium-card">
            <h2 style="margin-bottom: 1.5rem; color: var(--dark-brown);">üìã Change History</h2>
            
            <div style="display: flex; flex-direction: column; gap: 1rem;">
                <div style="display: flex; justify-content: between; align-items: center; padding: 1rem; background: var(--off-white); border-radius: 8px;">
                    <div>
                        <div style="font-weight: 600; color: var(--dark-brown);">Registration fee updated</div>
                        <div style="color: var(--muted-rose); font-size: 0.9rem;">KES 300 ‚Üí KES 500 ‚Ä¢ Admin User ‚Ä¢ Jan 20, 2024</div>
                    </div>
                    <span class="status-completed">Completed</span>
                </div>

                <div style="display: flex; justify-content: between; align-items: center; padding: 1rem; background: var(--off-white); border-radius: 8px;">
                    <div>
                        <div style="font-weight: 600; color: var(--dark-brown);">Bank details updated</div>
                        <div style="color: var(--muted-rose); font-size: 0.9rem;">Account number changed ‚Ä¢ Admin User ‚Ä¢ Jan 18, 2024</div>
                    </div>
                    <span class="status-completed">Completed</span>
                </div>

                <div style="display: flex; justify-content: between; align-items: center; padding: 1rem; background: var(--off-white); border-radius: 8px;">
                    <div>
                        <div style="font-weight: 600; color: var(--dark-brown);">Referral bonus increased</div>
                        <div style="color: var(--muted-rose); font-size: 0.9rem;">KES 200 ‚Üí KES 300 ‚Ä¢ Admin User ‚Ä¢ Jan 15, 2024</div>
                    </div>
                    <span class="status-completed">Completed</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Security Notice -->
    <section class="premium-container">
        <div class="payment-notice">
            <h3 style="margin-bottom: 1rem;">üîí Security Notice</h3>
            <p style="margin: 0;">
                All changes to payment settings are logged and require admin authentication. 
                Please verify all information before saving changes. Test payment functionality 
                after making updates to ensure everything works correctly.
            </p>
        </div>
    </section>

    <!-- Premium Footer -->
    <footer class="premium-footer">
        <div class="footer-content">
            <div>
                <h3>Payment Settings</h3>
                <p>Secure Configuration</p>
                <p>Email: crowntradeacademy@gmail.com</p>
            </div>
            <div>
                <h3>Quick Access</h3>
                <p><a href="admin-dashboard.html" style="color: var(--warm-beige); text-decoration: none;">Admin Dashboard</a></p>
                <p><a href="#bank" style="color: var(--warm-beige); text-decoration: none;">Bank Details</a></p>
                <p><a href="#pricing" style="color: var(--warm-beige); text-decoration: none;">Pricing Settings</a></p>
            </div>
            <div>
                <h3>System</h3>
                <p>Settings Protected</p>
                <p>Change History Logged</p>
                <p>Auto-Backup Enabled</p>
            </div>
        </div>
        <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--muted-rose);">
            <p>&copy; 2024 Crown Trade Academy. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Save payment settings
        document.getElementById('paymentSettingsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Collect all form data
            const settings = {
                bankDetails: {
                    bankName: document.getElementById('bankName').value,
                    accountName: document.getElementById('accountName').value,
                    accountNumber: document.getElementById('accountNumber').value,
                    branch: document.getElementById('branch').value,
                    swiftCode: document.getElementById('swiftCode').value
                },
                mobileMoney: {
                    mpesaName: document.getElementById('mpesaName').value,
                    mpesaNumber: document.getElementById('mpesaNumber').value,
                    tillNumber: document.getElementById('tillNumber').value
                },
                pricing: {
                    registrationFee: document.getElementById('registrationFee').value,
                    mentorshipFee: document.getElementById('mentorshipFee').value,
                    advancedFee: document.getElementById('advancedFee').value,
                    premiumFee: document.getElementById('premiumFee').value
                },
                referral: {
                    referralBonus: document.getElementById('referralBonus').value,
                    minWithdrawal: document.getElementById('minWithdrawal').value
                },
                instructions: {
                    contactEmail: document.getElementById('contactEmail').value,
                    verificationMessage: document.getElementById('verificationMessage').value
                }
            };
            
            // In a real system, this would save to a database
            // For now, we'll simulate saving to localStorage
            localStorage.setItem('paymentSettings', JSON.stringify(settings));
            
            alert('‚úÖ Payment settings saved successfully!\n\nAll changes have been applied across the platform.');
            
            // Log the change
            logChange('Payment settings updated');
        });

        // Reset to default values
        function resetToDefault() {
            if (confirm('Reset all payment settings to default values?')) {
                document.getElementById('bankName').value = 'Standard Chartered Bank Kenya';
                document.getElementById('accountName').value = 'Crown Trade Academy';
                document.getElementById('accountNumber').value = '0100000000000';
                document.getElementById('branch').value = 'Westlands Branch';
                document.getElementById('swiftCode').value = 'SCBLKENX';
                document.getElementById('mpesaName').value = 'Crown Trade Academy';
                document.getElementById('mpesaNumber').value = '+254700000000';
                document.getElementById('tillNumber').value = '000000';
                document.getElementById('registrationFee').value = '500';
                document.getElementById('mentorshipFee').value = '50000';
                document.getElementById('advancedFee').value = '75000';
                document.getElementById('premiumFee').value = '120000';
                document.getElementById('referralBonus').value = '300';
                document.getElementById('minWithdrawal').value = '100';
                document.getElementById('contactEmail').value = 'crowntradeacademy@gmail.com';
                document.getElementById('verificationMessage').value = 'Kindly before payment contact us through our email crowntradeacademy@gmail.com for verification and payment instructions. All transactions require verification for security purposes.';
                
                alert('üîÑ All settings reset to default values!');
                logChange('Settings reset to default');
            }
        }

        // Test payment system
        function testPaymentSystem() {
            alert('üß™ Payment system test initiated...\n\n‚úÖ Bank details validated\n‚úÖ Mobile money configured\n‚úÖ Pricing structure verified\n‚úÖ Referral system active\n\nAll systems operational!');
        }

        // Log changes (simulated)
        function logChange(description) {
            const logEntry = {
                description: description,
                timestamp: new Date().toLocaleString(),
                user: 'Admin User'
            };
            console.log('Change logged:', logEntry);
        }

        // Load saved settings on page load
        document.addEventListener('DOMContentLoaded', function() {
            const savedSettings = localStorage.getItem('paymentSettings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                // In a real system, we would populate the form with saved settings
                console.log('Loaded saved settings:', settings);
            }
        });

        function logoutAdmin() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('adminUser');
                localStorage.removeItem('adminRole');
                localStorage.removeItem('adminName');
                window.location.href = 'index.html';
            }
        }
    </script>
</body>
</html>