<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Apply - Crown Trade Academy</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Step indicator */
    .step-indicator { display:flex; justify-content:space-between; margin-bottom:2rem; position:relative; }
    .step-indicator::before { content:''; position:absolute; top:15px; left:0; right:0; height:2px; background:#ccc; z-index:1; }
    .step { background:#fff; border:2px solid #ccc; border-radius:50%; width:30px; height:30px; display:flex; align-items:center; justify-content:center; font-weight:600; position:relative; z-index:2; transition:all 0.3s ease; }
    .step.active { background:#d4af37; border-color:#d4af37; color:#3a2d28; }
    .step.completed { background:#dc3545; border-color:#dc3545; color:white; }

    .step-content { display:none; }
    .step-content.active { display:block; }

    .file-upload { border:2px dashed #ccc; border-radius:8px; padding:2rem; text-align:center; cursor:pointer; transition:all 0.3s ease; }
    .file-upload:hover { border-color:#d4af37; }
    .file-upload.dragover { border-color:#d4af37; background:rgba(212,175,55,0.1); }

    .summary-grid { display:grid; grid-template-columns:1fr 1fr; gap:1rem; }
    .summary-item { margin-bottom:1rem; }
    .summary-label { color:#dc3545; font-size:0.9rem; margin-bottom:0.25rem; }
    .summary-value { color:#3a2d28; font-weight:600; }

    #successModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:1000; align-items:center; justify-content:center; }
  </style>
</head>
<body>
  <header class="premium-header">
    <nav class="premium-nav">
      <a href="index.html" class="logo">Crown Trade Academy</a>
    </nav>
  </header>

  <section class="premium-container" style="padding:2rem 0;">
    <div class="premium-card">
      <h1 style="text-align:center; color:#3a2d28;">Apply for Referral Program</h1>
      <p style="text-align:center; color:#dc3545; margin-bottom:2rem;">Complete your application in 3 simple steps</p>

      <div class="step-indicator">
        <div class="step active">1</div>
        <div class="step">2</div>
        <div class="step">3</div>
      </div>

      <!-- Step 1 -->
      <div id="step1" class="step-content active">
        <h3 style="color:#3a2d28; margin-bottom:1.5rem;">Personal Information</h3>
        <form id="applicationForm">
          <div class="form-group">
            <label>Full Name *</label>
            <input type="text" id="fullName" class="form-control" required placeholder="Enter full name">
          </div>
          <div class="form-group">
            <label>Email *</label>
            <input type="email" id="email" class="form-control" required placeholder="Enter email">
          </div>
          <div class="form-group">
            <label>Phone Number *</label>
            <input type="tel" id="phone" class="form-control" required placeholder="Enter phone number">
          </div>
          <div class="form-group">
            <label>Referral Code (Optional)</label>
            <input type="text" id="referralCode" class="form-control" placeholder="Enter referral code">
          </div>
          <button type="button" class="btn-premium" onclick="validateStep1()">Continue to Payment</button>
        </form>
      </div>

      <!-- Step 2 -->
      <div id="step2" class="step-content">
        <h3 style="color:#3a2d28; margin-bottom:1.5rem;">Payment</h3>
        <p>Send <strong>KES 500</strong> to Till Number: <strong>123456</strong> and upload the payment screenshot below.</p>
        <div class="file-upload" id="fileUploadArea" onclick="document.getElementById('paymentProof').click()">
          <input type="file" id="paymentProof" accept="image/*" style="display:none;" onchange="handleFileSelect(event)">
          <div id="fileUploadContent">
            <p>üìÅ Click to upload or drag and drop</p>
            <p style="font-size:0.9rem;">PNG, JPG up to 5MB</p>
          </div>
          <div id="filePreview" style="display:none;">
            <img id="previewImage" src="" style="max-width:200px; max-height:150px; border-radius:8px; margin-bottom:1rem;">
            <p>‚úÖ File selected</p>
            <button type="button" class="btn-secondary" onclick="changeFile()">Change File</button>
          </div>
        </div>
        <div style="display:flex; gap:1rem; margin-top:1rem;">
          <button type="button" class="btn-secondary" onclick="prevStep(1)">Back</button>
          <button type="button" class="btn-premium" onclick="validateStep2()">Continue to Review</button>
        </div>
      </div>

      <!-- Step 3 -->
      <div id="step3" class="step-content">
        <h3 style="color:#3a2d28; margin-bottom:1.5rem;">Review & Submit</h3>
        <div style="background:#fff; padding:1.5rem; border-radius:12px; margin-bottom:1.5rem;">
          <h4>Application Summary</h4>
          <div id="applicationSummary" class="summary-grid">
            <div class="summary-item">
              <div class="summary-label">Name:</div>
              <div class="summary-value" id="summaryName">-</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">Email:</div>
              <div class="summary-value" id="summaryEmail">-</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">Phone:</div>
              <div class="summary-value" id="summaryPhone">-</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">Referral Code:</div>
              <div class="summary-value" id="summaryReferral">-</div>
            </div>
            <div class="summary-item" style="grid-column: 1 / -1;">
              <div class="summary-label">Payment Proof:</div>
              <div id="paymentProofStatus" style="color:#dc3545;">‚ùå Not uploaded</div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label style="display:flex; align-items:start; cursor:pointer; padding:1rem; background:#fff; border-radius:8px;">
            <input type="checkbox" id="termsAgreement" style="margin-right:10px; margin-top:0.2rem;">
            <span>I agree to the Terms and Conditions and confirm all information is accurate.</span>
          </label>
        </div>
        <div style="display:flex; gap:1rem; margin-top:2rem;">
          <button type="button" class="btn-secondary" style="flex:1;" onclick="prevStep(2)">‚Üê Back to Payment</button>
          <button type="button" class="btn-premium" style="flex:1;" onclick="submitApplication()">Submit Application</button>
        </div>
      </div>

      <!-- Success Modal -->
      <div id="successModal" style="align-items:center; justify-content:center;">
        <div class="premium-card" style="max-width:400px; text-align:center;">
          <div style="font-size:3rem; margin-bottom:1rem;">‚úÖ</div>
          <h3>Application Submitted!</h3>
          <p>Your application is under review. Redirecting shortly...</p>
        </div>
      </div>

    </div>
  </section>

  <script src="script.js"></script>
</body>
</html>
